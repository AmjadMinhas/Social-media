import{T as x,r as v,K as y,m as b,f as k,g as C,c as r,a as e,t as s,F as m,e as h,o,j as S,u as p,ag as $,n as g}from"./app-0711289f.js";import{_ as A}from"./App-d278a8da.js";import"./Sidebar-ed7e3e68.js";import"./Menu-71249541.js";import"./Modal-c84f0e61.js";import"./ProfileModal-d0db9646.js";import"./FormInput-fc62addf.js";import"./FormPhoneInput-59513a41.js";/* empty css                      */import"./FormSelect-4646449b.js";import"./index-c977be8e.js";import"./hidden-8d63095b.js";import"./use-text-value-09936f16.js";import"./transition-5dbd9278.js";import"./micro-task-89dcd6af.js";import"./tabs-18ea4bd0.js";import"./LangToggle-83121b8a.js";import"./OrganizationModal-3e1ada2f.js";import"./index-394d358c.js";import"./MobileSidebar-068ba561.js";/* empty css              */import"./pusher-d14a1dab.js";const B={class:"py-6 px-4 md:px-6 lg:px-8"},I={class:"max-w-4xl mx-auto"},T={class:"bg-white rounded-lg shadow-md p-8"},j={class:"text-2xl font-bold text-gray-900 mb-2"},L={class:"text-gray-600 mb-6"},F={class:"space-y-4"},M=["onClick"],N={class:"flex items-center space-x-4"},P=["src","alt"],E={key:1,class:"w-16 h-16 rounded-full bg-gradient-to-br from-purple-500 via-pink-500 to-orange-400 flex items-center justify-center text-white text-2xl font-bold"},O={class:"flex-1"},q={class:"text-lg font-semibold"},z={class:"text-sm text-gray-500"},D={class:"text-xs text-gray-400"},H={key:2,class:"animate-spin rounded-full h-6 w-6 border-b-2 border-pink-600"},R={key:3,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",class:"text-gray-400"},X={class:"mt-6 text-center"},J={href:"/social-accounts",class:"text-blue-600 hover:text-blue-800"},K={key:1,class:"min-h-screen bg-gray-50 py-6 px-4"},U={class:"max-w-4xl mx-auto"},V={class:"bg-white rounded-lg shadow-md p-8"},W={class:"text-2xl font-bold text-gray-900 mb-2"},Z={class:"text-gray-600 mb-6"},G={class:"space-y-4"},Q=["onClick"],Y={class:"flex items-center space-x-4"},ee=["src","alt"],te={key:1,class:"w-16 h-16 rounded-full bg-gradient-to-br from-purple-500 via-pink-500 to-orange-400 flex items-center justify-center text-white text-2xl font-bold"},se={class:"flex-1"},oe={class:"text-lg font-semibold"},ne={class:"text-sm text-gray-500"},ie={class:"text-xs text-gray-400"},re={key:2,class:"animate-spin rounded-full h-6 w-6 border-b-2 border-pink-600"},ae={key:3,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",class:"text-gray-400"},le={class:"mt-6 text-center"},Le={__name:"SelectInstagramAccount",props:{title:String,accounts:Array,isPopup:Boolean},setup(c){const _=c,d=x({account_id:null}),a=v(!1),w=y(),f=b(()=>{var n;return w.props.csrf_token||((n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content"))||""}),u=async n=>{if(!a.value)if(a.value=!0,d.account_id=n,_.isPopup&&window.opener)try{const i=await fetch("/auth/instagram/save-account",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":f.value,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify({account_id:n})}),t=i.headers.get("content-type");let l;if(t&&t.includes("application/json"))l=await i.json();else{const ce=await i.text();throw new Error("Server returned an error page instead of JSON. Please try again.")}i.ok&&l.success!==!1?(window.opener&&window.opener.postMessage({type:"oauth_success",message:l.message||"Instagram account connected successfully!"},window.location.origin),setTimeout(()=>{window.closed||window.close()},100)):(window.opener&&window.opener.postMessage({type:"oauth_error",message:l.message||"Failed to connect Instagram account"},window.location.origin),setTimeout(()=>{window.closed||window.close()},100))}catch(i){window.opener&&(window.opener.postMessage({type:"oauth_error",message:"Failed to connect Instagram account: "+i.message},window.location.origin),setTimeout(()=>{window.closed||window.close()},100))}finally{a.value=!1}else d.post("/auth/instagram/save-account",{onSuccess:()=>{},onError:()=>{a.value=!1},onFinish:()=>{a.value=!1}})};return(n,i)=>c.isPopup?(o(),r("div",K,[e("div",U,[e("div",V,[e("h1",W,s(n.$t("Select Instagram Account")),1),e("p",Z,s(n.$t("Choose which Instagram Business account you want to connect for posting")),1),e("div",G,[(o(!0),r(m,null,h(c.accounts,t=>(o(),r("div",{key:t.id,class:g(["border-2 border-gray-200 rounded-lg p-4 hover:border-pink-500 transition cursor-pointer",{"opacity-50 cursor-not-allowed":a.value}]),onClick:l=>!a.value&&u(t.id)},[e("div",Y,[t.profile_picture?(o(),r("img",{key:0,src:t.profile_picture,alt:t.username,class:"w-16 h-16 rounded-full"},null,8,ee)):(o(),r("div",te,s(t.username.charAt(0).toUpperCase()),1)),e("div",se,[e("h3",oe,"@"+s(t.username),1),e("p",ne,"Connected to: "+s(t.page_name),1),e("p",ie,"ID: "+s(t.id),1)]),a.value&&p(d).account_id===t.id?(o(),r("div",re)):(o(),r("svg",ae,i[2]||(i[2]=[e("path",{fill:"currentColor",d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"},null,-1)])))])],10,Q))),128))]),e("div",le,[e("button",{onClick:i[0]||(i[0]=t=>n.window.close()),class:"text-blue-600 hover:text-blue-800"},s(n.$t("Cancel")),1)])])])])):(o(),k(A,{key:0},{default:C(()=>[S(p($),{title:c.title},null,8,["title"]),e("div",B,[e("div",I,[e("div",T,[e("h1",j,s(n.$t("Select Instagram Account")),1),e("p",L,s(n.$t("Choose which Instagram Business account you want to connect for posting")),1),e("div",F,[(o(!0),r(m,null,h(c.accounts,t=>(o(),r("div",{key:t.id,class:g(["border-2 border-gray-200 rounded-lg p-4 hover:border-pink-500 transition cursor-pointer",{"opacity-50 cursor-not-allowed":a.value}]),onClick:l=>!a.value&&u(t.id)},[e("div",N,[t.profile_picture?(o(),r("img",{key:0,src:t.profile_picture,alt:t.username,class:"w-16 h-16 rounded-full"},null,8,P)):(o(),r("div",E,s(t.username.charAt(0).toUpperCase()),1)),e("div",O,[e("h3",q,"@"+s(t.username),1),e("p",z,"Connected to: "+s(t.page_name),1),e("p",D,"ID: "+s(t.id),1)]),a.value&&p(d).account_id===t.id?(o(),r("div",H)):(o(),r("svg",R,i[1]||(i[1]=[e("path",{fill:"currentColor",d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"},null,-1)])))])],10,M))),128))]),e("div",X,[e("a",J,s(n.$t("Cancel")),1)])])])])]),_:1}))}};export{Le as default};
