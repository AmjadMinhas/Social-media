import{T as b,r as v,K as x,m as y,f as k,g as C,c as i,a as t,t as n,F as p,e as h,o,j as F,u as d,af as S,n as m}from"./app-db66d61d.js";import{_ as $}from"./App-3956ecd8.js";import"./Sidebar-52b221b8.js";import"./Menu-b889f12a.js";import"./Modal-a824fd5c.js";import"./ProfileModal-26295007.js";import"./FormInput-44af5dd7.js";import"./FormPhoneInput-dd458330.js";/* empty css                      */import"./FormSelect-299ed3fd.js";import"./index-7cc47353.js";import"./hidden-be603183.js";import"./use-text-value-dc32201d.js";import"./transition-59378dc4.js";import"./micro-task-89dcd6af.js";import"./tabs-8bf78ca9.js";import"./LangToggle-522c5268.js";import"./OrganizationModal-7997fd80.js";import"./index-f104af55.js";import"./MobileSidebar-fde650c3.js";/* empty css              */import"./pusher-2d476617.js";const P={class:"py-6 px-4 md:px-6 lg:px-8"},T={class:"max-w-4xl mx-auto"},B={class:"bg-white rounded-lg shadow-md p-8"},j={class:"text-2xl font-bold text-gray-900 mb-2"},L={class:"text-gray-600 mb-6"},A={class:"space-y-4"},M=["onClick"],E={class:"flex items-center space-x-4"},N=["src","alt"],z={key:1,class:"w-16 h-16 rounded-full bg-blue-500 flex items-center justify-center text-white text-2xl font-bold"},D={class:"flex-1"},O={class:"text-lg font-semibold"},H={class:"text-sm text-gray-500"},K={key:2,class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"},V={key:3,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",class:"text-gray-400"},q={class:"mt-6 text-center"},I={href:"/social-accounts",class:"text-blue-600 hover:text-blue-800"},J={key:1,class:"min-h-screen bg-gray-50 py-6 px-4"},R={class:"max-w-4xl mx-auto"},X={class:"bg-white rounded-lg shadow-md p-8"},Z={class:"text-2xl font-bold text-gray-900 mb-2"},G={class:"text-gray-600 mb-6"},Q={class:"space-y-4"},U=["onClick"],W={class:"flex items-center space-x-4"},Y=["src","alt"],ee={key:1,class:"w-16 h-16 rounded-full bg-blue-500 flex items-center justify-center text-white text-2xl font-bold"},te={class:"flex-1"},oe={class:"text-lg font-semibold"},se={class:"text-sm text-gray-500"},ie={key:2,class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"},ae={key:3,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",class:"text-gray-400"},ne={class:"mt-6 text-center"},Te={__name:"SelectFacebookPage",props:{title:String,pages:Array,isPopup:Boolean},setup(l){const _=l,c=b({page_id:null}),r=v(!1),w=x(),g=y(()=>{var s;return w.props.csrf_token||((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""}),u=async s=>{if(!r.value)if(r.value=!0,c.page_id=s,_.isPopup&&window.opener)try{const a=await fetch("/auth/facebook/save-page",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":g.value,Accept:"application/json"},credentials:"same-origin",body:JSON.stringify({page_id:s})}),e=await a.json();a.ok?(window.opener.postMessage({type:"oauth_success",message:e.message||"Facebook page connected successfully!"},window.location.origin),setTimeout(()=>{window.close()},100)):(window.opener.postMessage({type:"oauth_error",message:e.message||"Failed to connect Facebook page"},window.location.origin),setTimeout(()=>{window.close()},100))}catch(a){console.error("Error saving Facebook page:",a),window.opener&&(window.opener.postMessage({type:"oauth_error",message:"Failed to connect Facebook page: "+a.message},window.location.origin),setTimeout(()=>{window.close()},100))}finally{r.value=!1}else c.post("/auth/facebook/save-page",{onSuccess:()=>{},onError:()=>{r.value=!1},onFinish:()=>{r.value=!1}})};return(s,a)=>l.isPopup?(o(),i("div",J,[t("div",R,[t("div",X,[t("h1",Z,n(s.$t("Select Facebook Page")),1),t("p",G,n(s.$t("Choose which Facebook page you want to connect for posting")),1),t("div",Q,[(o(!0),i(p,null,h(l.pages,e=>(o(),i("div",{key:e.id,class:m(["border-2 border-gray-200 rounded-lg p-4 hover:border-blue-500 transition cursor-pointer",{"opacity-50 cursor-not-allowed":r.value}]),onClick:f=>!r.value&&u(e.id)},[t("div",W,[e.picture&&e.picture.data&&e.picture.data.url?(o(),i("img",{key:0,src:e.picture.data.url,alt:e.name,class:"w-16 h-16 rounded-full"},null,8,Y)):(o(),i("div",ee,n(e.name.charAt(0)),1)),t("div",te,[t("h3",oe,n(e.name),1),t("p",se,"ID: "+n(e.id),1)]),r.value&&d(c).page_id===e.id?(o(),i("div",ie)):(o(),i("svg",ae,a[2]||(a[2]=[t("path",{fill:"currentColor",d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"},null,-1)])))])],10,U))),128))]),t("div",ne,[t("button",{onClick:a[0]||(a[0]=e=>s.window.close()),class:"text-blue-600 hover:text-blue-800"},n(s.$t("Cancel")),1)])])])])):(o(),k($,{key:0},{default:C(()=>[F(d(S),{title:l.title},null,8,["title"]),t("div",P,[t("div",T,[t("div",B,[t("h1",j,n(s.$t("Select Facebook Page")),1),t("p",L,n(s.$t("Choose which Facebook page you want to connect for posting")),1),t("div",A,[(o(!0),i(p,null,h(l.pages,e=>(o(),i("div",{key:e.id,class:m(["border-2 border-gray-200 rounded-lg p-4 hover:border-blue-500 transition cursor-pointer",{"opacity-50 cursor-not-allowed":r.value}]),onClick:f=>!r.value&&u(e.id)},[t("div",E,[e.picture&&e.picture.data&&e.picture.data.url?(o(),i("img",{key:0,src:e.picture.data.url,alt:e.name,class:"w-16 h-16 rounded-full"},null,8,N)):(o(),i("div",z,n(e.name.charAt(0)),1)),t("div",D,[t("h3",O,n(e.name),1),t("p",H,"ID: "+n(e.id),1)]),r.value&&d(c).page_id===e.id?(o(),i("div",K)):(o(),i("svg",V,a[1]||(a[1]=[t("path",{fill:"currentColor",d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"},null,-1)])))])],10,M))),128))]),t("div",q,[t("a",I,n(s.$t("Cancel")),1)])])])])]),_:1}))}};export{Te as default};
