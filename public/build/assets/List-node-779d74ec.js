import{D as xe,r as _,G as J,m as ye,o as m,c as v,j as o,u as n,a as t,f as K,n as c,t as k,g as i,h as u,d as ge,b as h,w as _e,v as Ve,F as Q,e as X}from"./app-f6dff7c1.js";import{_ as ke,E as Te}from"./ellipsis-9dffdb21.js";import{b as he,u as Ce,c as Y,d as Z}from"./vue-flow-core-eb47a5a8.js";import{_ as I}from"./Menubar.vue_vue_type_script_setup_true_lang-e9fab423.js";import{_ as f}from"./MenubarItem.vue_vue_type_script_setup_true_lang-407bfccc.js";import{_ as ee}from"./MenubarContent.vue_vue_type_script_setup_true_lang-2fac093b.js";import{_ as te}from"./MenubarMenu.vue_vue_type_script_setup_true_lang-00969a40.js";import{_ as le}from"./MenubarTrigger.vue_vue_type_script_setup_true_lang-cf9a8d8c.js";import{_ as y}from"./FormInput-f17f0ff4.js";import{_ as $e}from"./FormSelect-f6b13c4f.js";import Ee from"./FlowMedia-badb8ba8.js";import{_ as Le}from"./_plugin-vue_export-helper-c27b6911.js";import"./createLucideIcon-d2dc0d91.js";import"./index-06614974.js";import"./utils-836e31d3.js";import"./index-efe01691.js";import"./hidden-b4987649.js";import"./use-text-value-d59c3f26.js";import"./use-outside-click-2748f477.js";import"./use-resolve-button-type-7c3a791d.js";const we={class:"rounded-sm border border-gray-200 bg-white p-3 shadow-md"},Se={class:"flex flex-col gap-y-2"},Ne={class:"flex justify-between items-center"},Re={class:"flex gap-x-2"},Ue={class:"flex flex-col gap-y-1"},Be={key:1,class:"text-base"},De={key:0,class:"flex items-center gap-x-2 bg-red-500 text-white rounded-md px-2 py-2"},Ae={class:"mb-4"},Fe={key:1,class:"mb-4"},Me={class:"mb-4"},je={class:"mb-4"},qe={class:"mb-4"},He={class:"flex justify-between items-center mb-2"},Pe={class:"text-sm"},ze=["onClick"],Oe={class:"mb-4"},Ge={class:"flex justify-between items-center mb-4"},We=["onClick"],Je={class:"flex justify-between items-center mb-2"},Ke={class:"text-sm"},Qe=["onClick"],Xe={class:"grid grid-cols-2 gap-x-6"},Ye={class:"mb-4"},Ze={class:"text-sm"},Ie={class:"mb-2"},et={class:"text-sm"},tt={class:"mb-2"},lt={class:"text-sm"},at=xe({__name:"List-node",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(ae){var R,U,B,D,A,F,M,j,q,H,P,z,O,G,W;const p=ae,C=_(p.data.title),se=_(p.data.uuid),$=_(!1),a=_({type:"interactive list",headerType:((U=(R=p.data.metadata)==null?void 0:R.fields)==null?void 0:U.headerType)||"none",headerText:((D=(B=p.data.metadata)==null?void 0:B.fields)==null?void 0:D.headerText)||"",headerMedia:((F=(A=p.data.metadata)==null?void 0:A.fields)==null?void 0:F.headerMedia)||[],body:((j=(M=p.data.metadata)==null?void 0:M.fields)==null?void 0:j.body)||"",footer:((H=(q=p.data.metadata)==null?void 0:q.fields)==null?void 0:H.footer)||"",buttonLabel:((z=(P=p.data.metadata)==null?void 0:P.fields)==null?void 0:z.buttonLabel)||"",sections:((G=(O=p.data.metadata)==null?void 0:O.fields)==null?void 0:G.sections)||[{rows:[{}]}]}),oe=_([{value:"none",label:"None"},{value:"text",label:"Text"},{value:"image",label:"Image"},{value:"video",label:"Video"},{value:"audio",label:"Audio"},{value:"document",label:"Document"}]),b=he(),{removeNodes:ne,nodes:de,addNodes:ie,removeEdges:L,edges:w}=Ce();function S(s){w.value.filter(l=>l.sourceHandle===s).forEach(l=>L(l.id))}J(a,s=>{b.node.data.metadata.fields={...s}},{deep:!0});function ue(){a.value.sections.length<10&&a.value.sections.push({rows:[{}]})}function re(s){a.value.sections[s].rows.length<10&&a.value.sections[s].rows.push({})}function me(s){a.value.sections.length>1&&(a.value.sections[s].rows.forEach((e,l)=>{const r="a"+s+l;S(r)}),a.value.sections.splice(s,1))}function pe(s,e){a.value.sections[s].rows.length>1&&(S("a"+s+e),a.value.sections[s].rows.splice(e,1))}function ve(){w.value.filter(s=>s.source===b.id||s.target===b.id).forEach(s=>L(s.id)),ne(b.id)}function fe(){const{type:s,position:e,label:l,data:r}=b.node,d={id:(de.value.length+1).toString(),type:s,position:{x:e.x+100,y:e.y+100},label:l,data:r};ie(d)}const ce=ye(()=>{const s=a.value.sections.some(e=>e.title?e.rows.every(l=>!l.title||!l.id):!0);return a.value.headerType!==""&&a.value.headerType==="text"&&a.value.headerText===""||a.value.headerType!==""&&a.value.headerType!=="text"&&a.value.headerType!=="none"&&a.value.headerMedia.length===0||a.value.body===""||a.value.buttonLabel===""||s});function E(s){return s.length}const N=_(null),x=_(((W=p.data.metadata)==null?void 0:W.fields.body)||"");J(x,s=>{b.node.data.metadata.fields={...b.node.data.metadata.fields,type:"text",body:s}});function be(s){x.value=s.target.value}const g=s=>{const e=N.value;if(e&&x.value.indexOf(s)===-1){const l=e.selectionStart,r=e.selectionEnd;x.value=x.value.slice(0,l)+s+x.value.slice(r),setTimeout(()=>{e.setSelectionRange(l+s.length,l+s.length),e.focus()},0)}};return(s,e)=>(m(),v("div",we,[o(n(Z),{type:"target",position:n(Y).Left},null,8,["position"]),t("div",Se,[t("div",Ne,[t("div",Re,[e[16]||(e[16]=t("img",{src:ke,class:"mt-1 h-4 w-4",alt:"LLM icon"},null,-1)),t("div",Ue,[$.value?(m(),K(y,{key:0,modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=l=>C.value=l),name:"",type:"text",class:c("col-span-4"),onBlur:e[1]||(e[1]=()=>$.value=!1)},null,8,["modelValue"])):(m(),v("h3",Be,k(C.value),1))])]),o(n(I),{class:"border-none"},{default:i(()=>[o(n(te),null,{default:i(()=>[o(n(le),null,{default:i(()=>[o(n(Te))]),_:1}),o(n(ee),null,{default:i(()=>[o(n(f),{onClick:fe},{default:i(()=>e[17]||(e[17]=[u("Duplicate")])),_:1}),o(n(f),{onClick:ve},{default:i(()=>e[18]||(e[18]=[u("Delete")])),_:1}),o(n(f),{onClick:e[2]||(e[2]=l=>$.value=!0)},{default:i(()=>e[19]||(e[19]=[u("Rename")])),_:1})]),_:1})]),_:1})]),_:1})]),ce.value?(m(),v("div",De,e[20]||(e[20]=[ge('<span data-v-a0d2cad2><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" data-v-a0d2cad2><g fill="none" data-v-a0d2cad2><path d="m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z" data-v-a0d2cad2></path><path fill="currentColor" d="m13.299 3.148l8.634 14.954a1.5 1.5 0 0 1-1.299 2.25H3.366a1.5 1.5 0 0 1-1.299-2.25l8.634-14.954c.577-1 2.02-1 2.598 0M12 15a1 1 0 1 0 0 2a1 1 0 0 0 0-2m0-7a1 1 0 0 0-.993.883L11 9v4a1 1 0 0 0 1.993.117L13 13V9a1 1 0 0 0-1-1" data-v-a0d2cad2></path></g></svg></span><span class="text-sm" data-v-a0d2cad2>Please fill all the required fields</span>',2)]))):h("",!0),e[40]||(e[40]=t("span",{class:"text-sm text-gray-500"}," Send interactive list message to your recipients. ",-1)),t("div",Ae,[e[21]||(e[21]=t("label",{class:"text-sm mb-2"},"Header (Optional)",-1)),o($e,{modelValue:a.value.headerType,"onUpdate:modelValue":e[3]||(e[3]=l=>a.value.headerType=l),name:"",type:"text",optionClassName:"h-32",options:oe.value,class:c("col-span-4")},null,8,["modelValue","options"])]),a.value.headerType=="text"?(m(),v("div",Fe,[e[22]||(e[22]=t("label",{class:"text-sm mb-2"},[t("span",{class:"text-red-500"},"*"),u(" Header Text")],-1)),o(y,{modelValue:a.value.headerText,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value.headerText=l),name:"",placeholder:"Enter header text",type:"text",class:c("col-span-4")},null,8,["modelValue"])])):h("",!0),a.value.headerType!="text"&&a.value.headerType!="none"?(m(),K(Ee,{key:2,modelValue:a.value.headerMedia,"onUpdate:modelValue":e[5]||(e[5]=l=>a.value.headerMedia=l),type:a.value.headerType,uuid:se.value,nodeId:n(b).id},null,8,["modelValue","type","uuid","nodeId"])):h("",!0),t("div",Me,[e[23]||(e[23]=t("label",{class:"text-sm mb-2"},[t("span",{class:"text-red-500"},"*"),u(" Body")],-1)),_e(t("textarea",{ref_key:"textAreaRef",ref:N,class:"block w-full rounded-md border-0 py-1.5 px-4 text-gray-900 shadow-sm outline-none ring-1 ring-inset placeholder:text-gray-400 sm:text-sm sm:leading-6 ring-gray-300","onUpdate:modelValue":e[6]||(e[6]=l=>x.value=l),onInput:be,rows:"5",placeholder:"Enter text"},"        ",544),[[Ve,x.value]])]),o(n(I),{class:"border-none"},{default:i(()=>[o(n(te),null,{default:i(()=>[o(n(le),null,{default:i(()=>e[24]||(e[24]=[t("button",{type:"button",class:"hover:bg-slate-100 bg-slate-100 rounded p-1 text-sm"},"Add variable",-1)])),_:1}),o(n(ee),null,{default:i(()=>[o(n(f),{onClick:e[7]||(e[7]=l=>g("{first_name}"))},{default:i(()=>e[25]||(e[25]=[u("{first_name}")])),_:1}),o(n(f),{onClick:e[8]||(e[8]=l=>g("{last_name}"))},{default:i(()=>e[26]||(e[26]=[u("{last_name}")])),_:1}),o(n(f),{onClick:e[9]||(e[9]=l=>g("{full_name}"))},{default:i(()=>e[27]||(e[27]=[u("{full_name}")])),_:1}),o(n(f),{onClick:e[10]||(e[10]=l=>g("{phone_number}"))},{default:i(()=>e[28]||(e[28]=[u("{phone_number}")])),_:1}),o(n(f),{onClick:e[11]||(e[11]=l=>g("{email}"))},{default:i(()=>e[29]||(e[29]=[u("{email}")])),_:1}),o(n(f),{onClick:e[12]||(e[12]=l=>g("{city}"))},{default:i(()=>e[30]||(e[30]=[u("{city}")])),_:1}),o(n(f),{onClick:e[13]||(e[13]=l=>g("{country}"))},{default:i(()=>e[31]||(e[31]=[u("{country}")])),_:1})]),_:1})]),_:1})]),_:1}),t("div",je,[e[32]||(e[32]=t("label",{class:"text-sm mb-2"},"Footer Text (Optional)",-1)),o(y,{modelValue:a.value.footer,"onUpdate:modelValue":e[14]||(e[14]=l=>a.value.footer=l),name:"",placeholder:"Enter footer text",type:"text",class:c("col-span-4")},null,8,["modelValue"])]),t("div",qe,[e[33]||(e[33]=t("label",{class:"text-sm mb-2"},[t("span",{class:"text-red-500"},"*"),u(" Button Label")],-1)),o(y,{modelValue:a.value.buttonLabel,"onUpdate:modelValue":e[15]||(e[15]=l=>a.value.buttonLabel=l),name:"",placeholder:"Enter button label",type:"text",class:c("col-span-4")},null,8,["modelValue"])]),t("div",{class:"flex justify-between items-center mb-4"},[e[34]||(e[34]=t("label",{class:"text-sm"},"Sections (At least one section)",-1)),t("button",{onClick:ue,class:"bg-slate-100 p-1 rounded-md text-sm px-2"},"Add Section")]),(m(!0),v(Q,null,X(a.value.sections,(l,r)=>(m(),v("div",{key:r,class:"border rounded p-3 mb-4"},[t("div",He,[t("label",Pe,"Section "+k(r+1),1),r>0?(m(),v("button",{key:0,onClick:d=>me(r),class:"text-red-500 text-sm"},"Remove Section",8,ze)):h("",!0)]),t("div",Oe,[e[35]||(e[35]=t("label",{class:"text-sm mb-2"},[t("span",{class:"text-red-500"},"*"),u(" Title")],-1)),o(y,{modelValue:l.title,"onUpdate:modelValue":d=>l.title=d,name:"",placeholder:"Enter section title",type:"text",class:c("col-span-4")},null,8,["modelValue","onUpdate:modelValue"])]),t("div",Ge,[e[36]||(e[36]=t("label",{class:"text-sm"},"Rows (At least one row)",-1)),t("button",{onClick:d=>re(r),class:"bg-slate-100 p-1 rounded-md text-sm px-2"},"Add Row",8,We)]),(m(!0),v(Q,null,X(l.rows,(d,T)=>(m(),v("div",{key:T,class:"relative border rounded p-3 bg-slate-50 mb-2"},[t("div",Je,[t("label",Ke,"Row "+k(T+1),1),T>0?(m(),v("button",{key:0,onClick:V=>pe(r,T),class:"text-red-500 text-sm"},"Remove Row",8,Qe)):h("",!0)]),t("div",Xe,[t("div",Ye,[e[37]||(e[37]=t("label",{class:"text-sm mb-2"},[t("span",{class:"text-red-500"},"*"),u(" ID")],-1)),o(y,{modelValue:d.id,"onUpdate:modelValue":V=>d.id=V,maxLength:"200",name:"",placeholder:"Enter ID",type:"text",class:c("col-span-4")},null,8,["modelValue","onUpdate:modelValue"]),t("span",Ze,k(E((d==null?void 0:d.id)??""))+"/200",1)]),t("div",Ie,[e[38]||(e[38]=t("label",{class:"text-sm mb-2"},[t("span",{class:"text-red-500"},"*"),u(" Title")],-1)),o(y,{modelValue:d.title,"onUpdate:modelValue":V=>d.title=V,maxLength:"24",name:"",placeholder:"Enter row title",type:"text",class:c("col-span-4")},null,8,["modelValue","onUpdate:modelValue"]),t("span",et,k(E((d==null?void 0:d.title)??""))+"/24",1)])]),t("div",tt,[e[39]||(e[39]=t("label",{class:"text-sm mb-2"},[t("span",{class:"text-red-500"},"*"),u(" Description")],-1)),o(y,{modelValue:d.description,"onUpdate:modelValue":V=>d.description=V,maxLength:"72",name:"",placeholder:"Enter description",type:"text",class:c("col-span-4")},null,8,["modelValue","onUpdate:modelValue"]),t("span",lt,k(E((d==null?void 0:d.description)??""))+"/72",1)]),o(n(Z),{id:"a"+r+T,type:"source",position:n(Y).Right,style:{right:"-25px"}},null,8,["id","position"])]))),128))]))),128))])]))}});const ht=Le(at,[["__scopeId","data-v-a0d2cad2"]]);export{ht as default};
