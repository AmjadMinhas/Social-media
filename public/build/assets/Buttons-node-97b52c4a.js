import{D as Ut,r as x,G as $,m as Ct,o as d,c as f,j as n,u as s,a,f as U,t as m,g as u,h as i,d as wt,b as y,n as g,w as rt,v as Lt,F as Nt,e as $t,ap as Rt}from"./app-bd8ce98d.js";import{_ as Et,E as Pt}from"./ellipsis-1f1f8d0b.js";import{b as Dt,u as St,c as C,d as w}from"./vue-flow-core-47f28d27.js";import{_ as pt}from"./Menubar.vue_vue_type_script_setup_true_lang-99c74217.js";import{_ as v}from"./MenubarItem.vue_vue_type_script_setup_true_lang-cbf5bb8e.js";import{_ as mt}from"./MenubarContent.vue_vue_type_script_setup_true_lang-afbdd52a.js";import{_ as bt}from"./MenubarMenu.vue_vue_type_script_setup_true_lang-d84f5290.js";import{_ as vt}from"./MenubarTrigger.vue_vue_type_script_setup_true_lang-2f41805d.js";import{_ as T}from"./FormInput-7ab73e16.js";import{_ as Mt}from"./FormSelect-c078ee88.js";import ht from"./FlowMedia-6511e0c9.js";import{_ as At}from"./_plugin-vue_export-helper-c27b6911.js";import"./createLucideIcon-c7ff8b36.js";import"./index-2bb5ca05.js";import"./utils-836e31d3.js";import"./index-953f2b38.js";import"./hidden-2d6ae3fe.js";import"./use-text-value-4e32fddf.js";const It={class:"rounded-sm border border-gray-200 bg-white p-3 shadow-md"},qt={class:"flex flex-col gap-y-2"},zt={class:"flex justify-between items-center"},Ft={class:"flex gap-x-2"},Ht={class:"flex flex-col gap-y-1"},Ot={key:1,class:"text-base"},jt={key:0,class:"flex items-center gap-x-2 bg-red-500 text-white rounded-md px-2 py-2"},Jt={class:"mb-4"},Zt={key:1,class:"mb-4"},Gt={class:"text-xs text-gray-500"},Wt={class:"mb-4"},Kt={class:"mb-4"},Qt={class:"mb-4"},Xt={class:"flex space-x-4"},Yt=["value"],te={class:"ml-2 text-gray-700"},ee={key:3,class:"border rounded p-3"},le={class:"mb-4 relative"},ae={class:"text-xs text-gray-500"},oe={class:"mb-4 relative"},se={class:"text-xs text-gray-500"},ne={class:"mb-2 relative"},ue={class:"text-xs text-gray-500"},de={key:4,class:"border rounded p-3"},ie={class:"mb-4"},re={class:"text-xs text-gray-500"},pe={class:"mb-4"},_=20,me=Ut({__name:"Buttons-node",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(xt){var h,A,I,q,z,F,H,O,j,J,Z,G,W,K,Q,X,Y,tt,et,lt,at,ot,st,nt,ut,dt,it;const r=xt,R=x("Interactive Buttons"),ft=x(r.data.uuid),e=x({type:"interactive buttons",headerType:((A=(h=r.data.metadata)==null?void 0:h.fields)==null?void 0:A.headerType)||"none",headerText:((q=(I=r.data.metadata)==null?void 0:I.fields)==null?void 0:q.headerText)||"",headerMedia:((F=(z=r.data.metadata)==null?void 0:z.fields)==null?void 0:F.headerMedia)||[],body:((O=(H=r.data.metadata)==null?void 0:H.fields)==null?void 0:O.body)||"",footer:((J=(j=r.data.metadata)==null?void 0:j.fields)==null?void 0:J.footer)||"",buttonType:((G=(Z=r.data.metadata)==null?void 0:Z.fields)==null?void 0:G.buttonType)||"buttons",buttons:{button1:((Q=(K=(W=r.data.metadata)==null?void 0:W.fields)==null?void 0:K.buttons)==null?void 0:Q.button1)||"",button2:((tt=(Y=(X=r.data.metadata)==null?void 0:X.fields)==null?void 0:Y.buttons)==null?void 0:tt.button2)||"",button3:((at=(lt=(et=r.data.metadata)==null?void 0:et.fields)==null?void 0:lt.buttons)==null?void 0:at.button3)||""},ctaUrlButton:{displayText:((nt=(st=(ot=r.data.metadata)==null?void 0:ot.fields)==null?void 0:st.ctaUrlButton)==null?void 0:nt.displayText)||"",url:((it=(dt=(ut=r.data.metadata)==null?void 0:ut.fields)==null?void 0:dt.ctaUrlButton)==null?void 0:it.url)||""}}),yt=x([{label:"Reply Buttons",value:"buttons"},{label:"CTA URL Button",value:"cta_url"}]),gt=x([{value:"none",label:"None"},{value:"text",label:"Text"},{value:"image",label:"Image"},{value:"video",label:"Video"},{value:"audio",label:"Audio"},{value:"document",label:"Document"}]),p=Dt(),{removeNodes:Tt,nodes:ct,addNodes:Vt,removeEdges:P,edges:D}=St(),c=x(e.value.body);$(c,o=>{e.value.body=o,S()}),$(e,()=>{S()},{deep:!0});function S(){p&&p.node&&p.node.data&&p.node.data.metadata&&(p.node.data.metadata.fields=JSON.parse(JSON.stringify(e.value)))}function V(o){D.value.filter(l=>l.sourceHandle===o&&l.source===p.id).forEach(l=>P(l.id))}$(e,o=>{o.buttons.button1||V("a"),o.buttons.button2||V("b"),o.buttons.button3||V("c"),o.buttonType==="cta_url"?(V("a"),V("b"),V("c")):V("d")},{deep:!0});function Bt(){D.value.filter(o=>o.source===p.id||o.target===p.id).forEach(o=>P(o.id)),Tt(p.id)}function _t(){const{type:o,position:t,label:l,data:b}=p.node,N={id:(ct.value.length+1).toString(),type:o,position:{x:t.x+100,y:t.y+100},label:l,data:b};Vt(N)}const E=x(!1),M=x(null),B=o=>{const t=M.value;if(t&&c.value.indexOf(o)===-1){const l=t.selectionStart,b=t.selectionEnd;c.value=c.value.slice(0,l)+o+c.value.slice(b),setTimeout(()=>{t.setSelectionRange(l+o.length,l+o.length),t.focus()},0)}},kt=Ct(()=>{const o=e.value.buttons.button1!==""||e.value.buttons.button2!==""||e.value.buttons.button3!=="",t=e.value.ctaUrlButton.displayText!==""&&e.value.ctaUrlButton.url!=="",l=b=>/^(https?:\/\/)([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}(:\d+)?(\/\S*)?$/.test(b);return e.value.headerType!==""&&e.value.headerType==="text"&&e.value.headerText===""||e.value.headerType!==""&&e.value.headerType!=="text"&&e.value.headerType!=="none"&&e.value.headerMedia.length===0||e.value.body===""||e.value.buttonType==="buttons"&&!o||e.value.buttonType==="cta_url"&&(!t||!l(e.value.ctaUrlButton.url))});$(()=>e.headerText,o=>{o.length>60&&(e.headerText=o.slice(0,60))});function k(o){return o.length}function L(o){var b;o.preventDefault();const t=((b=o.clipboardData)==null?void 0:b.getData("text"))||"",l=removeEmojis(t).slice(0,20);e.value.buttonLabel=l}return(o,t)=>(d(),f("div",It,[n(s(w),{type:"target",position:s(C).Left},null,8,["position"]),a("div",qt,[a("div",zt,[a("div",Ft,[t[25]||(t[25]=a("img",{src:Et,class:"mt-1 h-4 w-4",alt:"LLM icon"},null,-1)),a("div",Ht,[E.value?(d(),U(T,{key:0,modelValue:R.value,"onUpdate:modelValue":t[0]||(t[0]=l=>R.value=l),type:"text",onBlur:t[1]||(t[1]=()=>E.value=!1)},null,8,["modelValue"])):(d(),f("h3",Ot,m(R.value),1))])]),n(s(pt),{class:"border-none"},{default:u(()=>[n(s(bt),null,{default:u(()=>[n(s(vt),null,{default:u(()=>[n(s(Pt))]),_:1}),n(s(mt),null,{default:u(()=>[n(s(v),{onClick:_t},{default:u(()=>t[26]||(t[26]=[i(" Duplicate ")])),_:1}),n(s(v),{onClick:Bt},{default:u(()=>t[27]||(t[27]=[i(" Delete ")])),_:1}),n(s(v),{onClick:t[2]||(t[2]=()=>E.value=!0)},{default:u(()=>t[28]||(t[28]=[i(" Rename ")])),_:1})]),_:1})]),_:1})]),_:1})]),kt.value?(d(),f("div",jt,t[29]||(t[29]=[wt('<span data-v-2adae9d5><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" data-v-2adae9d5><g fill="none" data-v-2adae9d5><path d="m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z" data-v-2adae9d5></path><path fill="currentColor" d="m13.299 3.148l8.634 14.954a1.5 1.5 0 0 1-1.299 2.25H3.366a1.5 1.5 0 0 1-1.299-2.25l8.634-14.954c.577-1 2.02-1 2.598 0M12 15a1 1 0 1 0 0 2a1 1 0 0 0 0-2m0-7a1 1 0 0 0-.993.883L11 9v4a1 1 0 0 0 1.993.117L13 13V9a1 1 0 0 0-1-1" data-v-2adae9d5></path></g></svg></span><span class="text-sm" data-v-2adae9d5>Please fill all the required fields</span>',2)]))):y("",!0),t[50]||(t[50]=a("span",{class:"text-sm text-gray-500"},"Send interactive buttons or a call to action button to your recipients.",-1)),a("div",Jt,[t[30]||(t[30]=a("label",{class:"text-sm mb-2"},"Header (Optional)",-1)),n(Mt,{modelValue:e.value.headerType,"onUpdate:modelValue":t[3]||(t[3]=l=>e.value.headerType=l),options:gt.value,class:g("col-span-4")},null,8,["modelValue","options"])]),e.value.headerType=="text"?(d(),f("div",Zt,[t[31]||(t[31]=a("label",{class:"text-sm mb-2"},[a("span",{class:"text-red-500"},"*"),i(" Header Text")],-1)),n(T,{modelValue:e.value.headerText,"onUpdate:modelValue":t[4]||(t[4]=l=>e.value.headerText=l),value:"fields.headerText",placeholder:"Enter header text",type:"text",class:g("col-span-4"),maxlength:60},null,8,["modelValue"]),a("span",Gt,m(k(e.value.headerText))+"/60",1)])):y("",!0),e.value.headerType!=="text"&&e.value.headerType!=="none"?(d(),U(ht,{key:2,modelValue:e.value.headerMedia,"onUpdate:modelValue":t[5]||(t[5]=l=>e.value.headerMedia=l),type:e.value.headerType,uuid:ft.value,nodeId:s(p).id},null,8,["modelValue","type","uuid","nodeId"])):y("",!0),a("div",Wt,[t[32]||(t[32]=a("label",{class:"text-sm mb-2"},[a("span",{class:"text-red-500"},"*"),i(" Body")],-1)),rt(a("textarea",{ref_key:"textAreaRef",ref:M,class:"block w-full rounded-md border-0 py-1.5 px-4 text-gray-900 shadow-sm outline-none ring-1 ring-inset placeholder:text-gray-400 sm:text-sm sm:leading-6 ring-gray-300","onUpdate:modelValue":t[6]||(t[6]=l=>c.value=l),rows:"5",placeholder:"Enter text"},null,512),[[Lt,c.value]])]),n(s(pt),{class:"border-none"},{default:u(()=>[n(s(bt),null,{default:u(()=>[n(s(vt),null,{default:u(()=>t[33]||(t[33]=[a("button",{type:"button",class:"hover:bg-slate-100 bg-slate-100 rounded p-1 text-sm"},"Add variable",-1)])),_:1}),n(s(mt),null,{default:u(()=>[n(s(v),{onClick:t[7]||(t[7]=l=>B("{first_name}"))},{default:u(()=>t[34]||(t[34]=[i(" {first_name} ")])),_:1}),n(s(v),{onClick:t[8]||(t[8]=l=>B("{last_name}"))},{default:u(()=>t[35]||(t[35]=[i(" {last_name} ")])),_:1}),n(s(v),{onClick:t[9]||(t[9]=l=>B("{full_name}"))},{default:u(()=>t[36]||(t[36]=[i(" {full_name} ")])),_:1}),n(s(v),{onClick:t[10]||(t[10]=l=>B("{phone_number}"))},{default:u(()=>t[37]||(t[37]=[i(" {phone_number} ")])),_:1}),n(s(v),{onClick:t[11]||(t[11]=l=>B("{email}"))},{default:u(()=>t[38]||(t[38]=[i(" {email} ")])),_:1}),n(s(v),{onClick:t[12]||(t[12]=l=>B("{city}"))},{default:u(()=>t[39]||(t[39]=[i(" {city} ")])),_:1}),n(s(v),{onClick:t[13]||(t[13]=l=>B("{country}"))},{default:u(()=>t[40]||(t[40]=[i(" {country} ")])),_:1})]),_:1})]),_:1})]),_:1}),a("div",Kt,[t[41]||(t[41]=a("label",{class:"text-sm mb-2"},"Footer Text (Optional)",-1)),n(T,{modelValue:e.value.footer,"onUpdate:modelValue":t[14]||(t[14]=l=>e.value.footer=l),placeholder:"Enter footer text",type:"text",class:g("col-span-4")},null,8,["modelValue"])]),a("div",Qt,[t[42]||(t[42]=a("label",{class:"text-sm mb-2"},"Button type:",-1)),a("div",Xt,[(d(!0),f(Nt,null,$t(yt.value,(l,b)=>(d(),f("label",{key:b,class:"inline-flex items-center cursor-pointer text-sm"},[rt(a("input",{type:"radio",value:l.value,"onUpdate:modelValue":t[15]||(t[15]=N=>e.value.buttonType=N),class:"form-radio text-blue-500 focus:ring-0 transition duration-150 ease-in-out"},null,8,Yt),[[Rt,e.value.buttonType]]),a("span",te,m(l.label),1)]))),128))])]),e.value.buttonType==="buttons"?(d(),f("div",ee,[t[46]||(t[46]=a("label",{class:"mb-2"},[a("span",{class:"text-red-500"},"*"),i(" Reply Buttons (at least 1 button)")],-1)),a("div",le,[t[43]||(t[43]=a("label",{class:"text-sm mb-2"},"Button 1 Label",-1)),n(T,{modelValue:e.value.buttons.button1,"onUpdate:modelValue":t[16]||(t[16]=l=>e.value.buttons.button1=l),maxLength:_,type:"text",class:g("col-span-4"),onPaste:t[17]||(t[17]=l=>L(l))},null,8,["modelValue"]),a("span",ae,m(k(e.value.buttons.button1))+" / "+m(_),1),e.value.buttons.button1?(d(),U(s(w),{key:0,id:"a",type:"source",position:s(C).Right,style:{right:"-25px"}},null,8,["position"])):y("",!0)]),a("div",oe,[t[44]||(t[44]=a("label",{class:"text-sm mb-2"},"Button 2 Label",-1)),n(T,{modelValue:e.value.buttons.button2,"onUpdate:modelValue":t[18]||(t[18]=l=>e.value.buttons.button2=l),maxLength:_,type:"text",class:g("col-span-4"),onPaste:t[19]||(t[19]=l=>L(l))},null,8,["modelValue"]),a("span",se,m(k(e.value.buttons.button2))+" / "+m(_),1),e.value.buttons.button2?(d(),U(s(w),{key:0,id:"b",type:"source",position:s(C).Right,style:{right:"-25px"}},null,8,["position"])):y("",!0)]),a("div",ne,[t[45]||(t[45]=a("label",{class:"text-sm mb-2"},"Button 3 Label",-1)),n(T,{modelValue:e.value.buttons.button3,"onUpdate:modelValue":t[20]||(t[20]=l=>e.value.buttons.button3=l),maxLength:_,type:"text",class:g("col-span-4"),onPaste:t[21]||(t[21]=l=>L(l))},null,8,["modelValue"]),a("span",ue,m(k(e.value.buttons.button3))+" / "+m(_),1),e.value.buttons.button3?(d(),U(s(w),{key:0,id:"c",type:"source",position:s(C).Right,style:{right:"-25px"}},null,8,["position"])):y("",!0)])])):y("",!0),e.value.buttonType==="cta_url"?(d(),f("div",de,[t[49]||(t[49]=a("label",{class:"text-sm mb-2"},"CTA Button",-1)),a("div",ie,[t[47]||(t[47]=a("label",{class:"text-sm mb-2"},"Display text",-1)),n(T,{modelValue:e.value.ctaUrlButton.displayText,"onUpdate:modelValue":t[22]||(t[22]=l=>e.value.ctaUrlButton.displayText=l),type:"text",class:g("col-span-4"),onPaste:t[23]||(t[23]=l=>L(l))},null,8,["modelValue"]),a("span",re,m(k(e.value.ctaUrlButton.displayText))+" / "+m(_),1)]),a("div",pe,[t[48]||(t[48]=a("label",{class:"text-sm mb-2"},"Button URL",-1)),n(T,{modelValue:e.value.ctaUrlButton.url,"onUpdate:modelValue":t[24]||(t[24]=l=>e.value.ctaUrlButton.url=l),type:"url",class:g("col-span-4")},null,8,["modelValue"])]),n(s(w),{id:"d",type:"source",position:s(C).Right},null,8,["position"])])):y("",!0)])]))}});const Re=At(me,[["__scopeId","data-v-2adae9d5"]]);export{Re as default};
