import{_ as xe,E as ce}from"./ellipsis-2dd797fb.js";import{b as ye,u as ge,c as K,d as Q}from"./vue-flow-core-1cd5e65f.js";import{_ as X}from"./Menubar.vue_vue_type_script_setup_true_lang-9530f430.js";import{_ as f}from"./MenubarItem.vue_vue_type_script_setup_true_lang-c601c00a.js";import{_ as Y}from"./MenubarContent.vue_vue_type_script_setup_true_lang-9701213a.js";import{_ as Z}from"./MenubarMenu.vue_vue_type_script_setup_true_lang-c57857ab.js";import{_ as I}from"./MenubarTrigger.vue_vue_type_script_setup_true_lang-673234f4.js";import{_ as g}from"./FormInput-5c26d6f8.js";import{_ as Ve}from"./FormSelect-fc4ff4e5.js";import{_ as _e}from"./FormTextArea-9417347f.js";import ke from"./FlowMedia-31c1a6db.js";import{D as Te,r as T,G as Ce,m as he,o as p,c as v,j as o,u as d,a as l,f as ee,n as b,t as x,g as u,h as r,d as $e,b as C,F as te,e as le}from"./app-16024625.js";import{_ as Ee}from"./_plugin-vue_export-helper-c27b6911.js";import"./createLucideIcon-66cc6070.js";import"./index-b71f361e.js";import"./utils-836e31d3.js";import"./index-cf21b94a.js";import"./hidden-769a48bc.js";import"./use-text-value-1db0facb.js";const Le={class:"rounded-sm border border-gray-200 bg-white p-3 shadow-md"},Se={class:"flex flex-col gap-y-2"},Ne={class:"flex justify-between items-center"},Re={class:"flex gap-x-2"},Ue={class:"flex flex-col gap-y-1"},Be={key:1,class:"text-base"},De={key:0,class:"flex items-center gap-x-2 bg-red-500 text-white rounded-md px-2 py-2"},we={class:"mb-4"},Pe={key:1,class:"mb-4"},je={class:"text-xs text-gray-500"},Ae={class:"mb-4"},Fe={type:"button",class:"hover:bg-slate-100 bg-slate-100 rounded p-1 text-sm"},qe={class:"mb-4"},Me={class:"mb-4"},He={class:"text-xs text-gray-500"},ze={class:"flex justify-between items-center mb-2"},Oe={class:"text-sm"},Ge=["onClick"],We={class:"mb-4"},Je={class:"text-xs text-gray-500"},Ke={class:"flex justify-between items-center mb-4"},Qe=["onClick"],Xe={class:"flex justify-between items-center mb-2"},Ye={class:"text-sm"},Ze=["onClick"],Ie={class:"grid grid-cols-2 gap-x-6"},et={class:"mb-4"},tt={class:"text-sm"},lt={class:"mb-2"},st={class:"text-sm"},at={class:"mb-2"},ot={class:"text-sm"},nt=Te({__name:"List-node",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(se){var B,D,w,P,j,A,F,q,M,H,z,O,G,W;const c=se,E=T(c.data.title),ae=T(c.data.uuid),L=T(!1),s=T({type:"interactive list",headerType:((D=(B=c.data.metadata)==null?void 0:B.fields)==null?void 0:D.headerType)||"none",headerText:((P=(w=c.data.metadata)==null?void 0:w.fields)==null?void 0:P.headerText)||"",headerMedia:((A=(j=c.data.metadata)==null?void 0:j.fields)==null?void 0:A.headerMedia)||[],body:((q=(F=c.data.metadata)==null?void 0:F.fields)==null?void 0:q.body)||"",footer:((H=(M=c.data.metadata)==null?void 0:M.fields)==null?void 0:H.footer)||"",buttonLabel:((O=(z=c.data.metadata)==null?void 0:z.fields)==null?void 0:O.buttonLabel)||"",sections:((W=(G=c.data.metadata)==null?void 0:G.fields)==null?void 0:W.sections)||[{rows:[{}]}]}),S=T(null);function V(a){var J;const e=(J=S.value)==null?void 0:J.$el,t=e==null?void 0:e.querySelector("textarea");if(!t)return;const i=t.selectionStart,n=t.selectionEnd,y=s.value.body||"",m=y.slice(0,i)+a+y.slice(n);s.value.body=m,nextTick(()=>{t.setSelectionRange(i+a.length,i+a.length),t.focus()})}const oe=T([{value:"none",label:"None"},{value:"text",label:"Text"},{value:"image",label:"Image"},{value:"video",label:"Video"},{value:"audio",label:"Audio"},{value:"document",label:"Document"}]),_=ye(),{removeNodes:ne,nodes:de,addNodes:ie,removeEdges:N,edges:R}=ge();function U(a){R.value.filter(t=>t.sourceHandle===a).forEach(t=>N(t.id))}Ce(s,a=>{_.node.data.metadata.fields={...a}},{deep:!0});function ue(){s.value.sections.length<10&&s.value.sections.push({rows:[{}]})}function re(a){s.value.sections[a].rows.length<10&&s.value.sections[a].rows.push({})}function me(a){s.value.sections.length>1&&(s.value.sections[a].rows.forEach((e,t)=>{const i="a"+a+t;U(i)}),s.value.sections.splice(a,1))}function pe(a,e){s.value.sections[a].rows.length>1&&(s.value.sections[a].rows.splice(e,1),s.value.sections[a].rows=s.value.sections[a].rows.map(t=>({...t,id:t.id,title:t.title||"",description:t.description||""})),U("a"+a+e))}function fe(){R.value.filter(a=>a.source===_.id||a.target===_.id).forEach(a=>N(a.id)),ne(_.id)}function ve(){const{type:a,position:e,label:t,data:i}=_.node,n={id:(de.value.length+1).toString(),type:a,position:{x:e.x+100,y:e.y+100},label:t,data:i};ie(n)}const be=he(()=>{const a=s.value.sections.some(e=>e.title?e.rows.every(t=>!t.title||!t.id):!0);return s.value.headerType!==""&&s.value.headerType==="text"&&s.value.headerText===""||s.value.headerType!==""&&s.value.headerType!=="text"&&s.value.headerType!=="none"&&s.value.headerMedia.length===0||s.value.body===""||s.value.buttonLabel===""||a});function k(a){return a.length}function h(a){const e=a.target.value;s.value.buttonLabel=removeEmojis(e).slice(0,20)}function $(a){var i;a.preventDefault();const e=((i=a.clipboardData)==null?void 0:i.getData("text"))||"",t=removeEmojis(e).slice(0,20);s.value.buttonLabel=t}return(a,e)=>(p(),v("div",Le,[o(d(Q),{type:"target",position:d(K).Left},null,8,["position"]),l("div",Se,[l("div",Ne,[l("div",Re,[e[24]||(e[24]=l("img",{src:xe,class:"mt-1 h-4 w-4",alt:"LLM icon"},null,-1)),l("div",Ue,[L.value?(p(),ee(g,{key:0,modelValue:E.value,"onUpdate:modelValue":e[0]||(e[0]=t=>E.value=t),name:"",type:"text",class:b("col-span-4"),onBlur:e[1]||(e[1]=()=>L.value=!1)},null,8,["modelValue"])):(p(),v("h3",Be,x(E.value),1))])]),o(d(X),{class:"border-none"},{default:u(()=>[o(d(Z),null,{default:u(()=>[o(d(I),null,{default:u(()=>[o(d(ce))]),_:1}),o(d(Y),null,{default:u(()=>[o(d(f),{onClick:ve},{default:u(()=>e[25]||(e[25]=[r(" Duplicated ")])),_:1}),o(d(f),{onClick:fe},{default:u(()=>e[26]||(e[26]=[r(" Delete ")])),_:1}),o(d(f),{onClick:e[2]||(e[2]=t=>L.value=!0)},{default:u(()=>e[27]||(e[27]=[r(" Rename ")])),_:1})]),_:1})]),_:1})]),_:1})]),be.value?(p(),v("div",De,e[28]||(e[28]=[$e('<span data-v-34fc9316><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" data-v-34fc9316><g fill="none" data-v-34fc9316><path d="m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z" data-v-34fc9316></path><path fill="currentColor" d="m13.299 3.148l8.634 14.954a1.5 1.5 0 0 1-1.299 2.25H3.366a1.5 1.5 0 0 1-1.299-2.25l8.634-14.954c.577-1 2.02-1 2.598 0M12 15a1 1 0 1 0 0 2a1 1 0 0 0 0-2m0-7a1 1 0 0 0-.993.883L11 9v4a1 1 0 0 0 1.993.117L13 13V9a1 1 0 0 0-1-1" data-v-34fc9316></path></g></svg></span><span class="text-sm" data-v-34fc9316>Please fill all the required fields</span>',2)]))):C("",!0),e[47]||(e[47]=l("span",{class:"text-sm text-gray-500"},"Send interactive list message to your recipients.",-1)),l("div",we,[e[29]||(e[29]=l("label",{class:"text-sm mb-2"},"Header (Optional)",-1)),o(Ve,{modelValue:s.value.headerType,"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.headerType=t),name:"",type:"text",optionClassName:"h-32",options:oe.value,class:b("col-span-4")},null,8,["modelValue","options"])]),s.value.headerType=="text"?(p(),v("div",Pe,[e[30]||(e[30]=l("label",{class:"text-sm mb-2"},[l("span",{class:"text-red-500"},"*"),r(" Header Text")],-1)),o(g,{modelValue:s.value.headerText,"onUpdate:modelValue":e[4]||(e[4]=t=>s.value.headerText=t),name:"",placeholder:"Enter header text",type:"text",class:b("col-span-4"),maxlength:60},null,8,["modelValue"]),l("span",je,x(k(s.value.headerText))+"/60",1)])):C("",!0),s.value.headerType!="text"&&s.value.headerType!="none"?(p(),ee(ke,{key:2,modelValue:s.value.headerMedia,"onUpdate:modelValue":e[5]||(e[5]=t=>s.value.headerMedia=t),type:s.value.headerType,uuid:ae.value,nodeId:d(_).id},null,8,["modelValue","type","uuid","nodeId"])):C("",!0),l("div",Ae,[e[38]||(e[38]=l("label",{class:"text-sm mb-2 flex justify-between items-center"},[l("span",null,[l("span",{class:"text-red-500"},"*"),r(" Body")])],-1)),o(_e,{ref_key:"textAreaRef",ref:S,modelValue:s.value.body,"onUpdate:modelValue":e[6]||(e[6]=t=>s.value.body=t),placeholder:"Enter the main message for this message type",name:"",type:"text",class:b("col-span-4")},null,8,["modelValue"]),o(d(X),{class:"border-none"},{default:u(()=>[o(d(Z),null,{default:u(()=>[o(d(I),null,{default:u(()=>[l("button",Fe,x(a.$t("Add variable")),1)]),_:1}),o(d(Y),null,{default:u(()=>[o(d(f),{onClick:e[7]||(e[7]=t=>V("{first_name}"))},{default:u(()=>e[31]||(e[31]=[r(" {first_name} ")])),_:1}),o(d(f),{onClick:e[8]||(e[8]=t=>V("{last_name}"))},{default:u(()=>e[32]||(e[32]=[r(" {last_name} ")])),_:1}),o(d(f),{onClick:e[9]||(e[9]=t=>V("{full_name}"))},{default:u(()=>e[33]||(e[33]=[r(" {full_name} ")])),_:1}),o(d(f),{onClick:e[10]||(e[10]=t=>V("{phone_number}"))},{default:u(()=>e[34]||(e[34]=[r(" {phone_number} ")])),_:1}),o(d(f),{onClick:e[11]||(e[11]=t=>V("{email}"))},{default:u(()=>e[35]||(e[35]=[r(" {email} ")])),_:1}),o(d(f),{onClick:e[12]||(e[12]=t=>V("{city}"))},{default:u(()=>e[36]||(e[36]=[r(" {city} ")])),_:1}),o(d(f),{onClick:e[13]||(e[13]=t=>V("{country}"))},{default:u(()=>e[37]||(e[37]=[r(" {country} ")])),_:1})]),_:1})]),_:1})]),_:1})]),l("div",qe,[e[39]||(e[39]=l("label",{class:"text-sm mb-2"},"Footer Text (Optional)",-1)),o(g,{modelValue:s.value.footer,"onUpdate:modelValue":e[14]||(e[14]=t=>s.value.footer=t),name:"",placeholder:"Enter footer text",type:"text",class:b("col-span-4")},null,8,["modelValue"])]),l("div",Me,[e[40]||(e[40]=l("label",{class:"text-sm mb-2"},[l("span",{class:"text-red-500"},"*"),r(" Button Label")],-1)),o(g,{modelValue:s.value.buttonLabel,"onUpdate:modelValue":e[15]||(e[15]=t=>s.value.buttonLabel=t),name:"",placeholder:"Enter footer text",type:"text",class:b("col-span-4"),maxlength:20,onInput:e[16]||(e[16]=t=>h(t)),onPaste:e[17]||(e[17]=t=>$(t))},null,8,["modelValue"]),l("span",He,x(k(s.value.buttonLabel))+"/20",1)]),l("div",{class:"flex justify-between items-center mb-4"},[e[41]||(e[41]=l("label",{class:"text-sm"},"Sections (Atleast one section)",-1)),l("button",{onClick:ue,class:"bg-slate-100 p-1 rounded-md text-sm px-2"},"Add Section")]),(p(!0),v(te,null,le(s.value.sections,(t,i)=>(p(),v("div",{key:i,class:"border rounded p-3 mb-4"},[l("div",ze,[l("label",Oe,"Section "+x(i+1),1),i>0?(p(),v("button",{key:0,onClick:n=>me(i),class:"text-red-500 text-sm"}," Remove Section ",8,Ge)):C("",!0)]),l("div",We,[e[42]||(e[42]=l("label",{class:"text-sm mb-2"},[l("span",{class:"text-red-500"},"*"),r(" Title")],-1)),o(g,{modelValue:t.title,"onUpdate:modelValue":n=>t.title=n,name:"",placeholder:"Enter section title",type:"text",class:b("col-span-4"),maxlength:24,onInput:e[18]||(e[18]=n=>h(n)),onPaste:e[19]||(e[19]=n=>$(n))},null,8,["modelValue","onUpdate:modelValue"]),l("span",Je,x(k(t.title??""))+"/24",1)]),l("div",Ke,[e[43]||(e[43]=l("label",{class:"text-sm"},"Rows (Atleast one row)",-1)),l("button",{onClick:n=>re(i),class:"bg-slate-100 p-1 rounded-md text-sm px-2"},"Add Row",8,Qe)]),(p(!0),v(te,null,le(t.rows,(n,y)=>(p(),v("div",{key:y,class:"relative border rounded p-3 bg-slate-50 mb-2"},[l("div",Xe,[l("label",Ye,"Row "+x(y+1),1),y>0?(p(),v("button",{key:0,onClick:m=>pe(i,y),class:"text-red-500 text-sm"}," Remove Row ",8,Ze)):C("",!0)]),l("div",Ie,[l("div",et,[e[44]||(e[44]=l("label",{class:"text-sm mb-2"},[l("span",{class:"text-red-500"},"*"),r(" ID")],-1)),o(g,{modelValue:n.id,"onUpdate:modelValue":m=>n.id=m,maxLength:"200",name:"",placeholder:"Enter ID",type:"text",class:b("col-span-4"),onInput:e[20]||(e[20]=m=>h(m)),onPaste:e[21]||(e[21]=m=>$(m))},null,8,["modelValue","onUpdate:modelValue"]),l("span",tt,x(k((n==null?void 0:n.id)??""))+"/200",1)]),l("div",lt,[e[45]||(e[45]=l("label",{class:"text-sm mb-2"},[l("span",{class:"text-red-500"},"*"),r(" Title")],-1)),o(g,{modelValue:n.title,"onUpdate:modelValue":m=>n.title=m,maxLength:"24",name:"",placeholder:"Enter row title",type:"text",class:b("col-span-4"),onInput:e[22]||(e[22]=m=>h(m)),onPaste:e[23]||(e[23]=m=>$(m))},null,8,["modelValue","onUpdate:modelValue"]),l("span",st,x(k((n==null?void 0:n.title)??""))+"/24",1)])]),l("div",at,[e[46]||(e[46]=l("label",{class:"text-sm mb-2"},[l("span",{class:"text-red-500"},"*"),r(" Description")],-1)),o(g,{modelValue:n.description,"onUpdate:modelValue":m=>n.description=m,maxLength:"72",name:"",placeholder:"Enter description",type:"text",class:b("col-span-4")},null,8,["modelValue","onUpdate:modelValue"]),l("span",ot,x(k((n==null?void 0:n.description)??""))+"/72",1)]),o(d(Q),{id:"a"+i+y,type:"source",position:d(K).Right,style:{right:"-25px"}},null,8,["id","position"])]))),128))]))),128))])]))}});const $t=Ee(nt,[["__scopeId","data-v-34fc9316"]]);export{$t as default};
