import{r as f,q as b,o as l,c as p,a as t,d as v,t as u,b as h,F as S,O as c}from"./app-bd8ce98d.js";const y={key:0,class:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50"},w={class:"bg-white p-6 rounded-lg shadow-lg text-center text-sm"},M={__name:"EmbeddedSignupBtn",props:["appId","configId","graphAPIVersion"],setup(d){const n=d,r=f(!1);b(()=>{window.fbAsyncInit=function(){FB.init({appId:n.appId,cookie:!0,xfbml:!0,version:n.graphAPIVersion})},function(e,s,i){var a,o=e.getElementsByTagName(s)[0];e.getElementById(i)||(a=e.createElement(s),a.id=i,a.src="https://connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(a,o))}(document,"script","facebook-jssdk")});const m=e=>{if(!(e.origin!=="https://www.facebook.com"&&e.origin!=="https://web.facebook.com"))try{const s=JSON.parse(e.data);if(s.type==="WA_EMBEDDED_SIGNUP")if(s.event==="FINISH"){const{phone_number_id:i,waba_id:a}=s.data}else{const{current_step:i}=s.data}}catch{}};function g(){window.addEventListener("message",m),typeof fbq<"u"&&fbq("trackCustom","WhatsAppOnboardingStart",{appId:n.appId,feature:"whatsapp_embedded_signup"}),FB.login(function(e){e.authResponse&&(r.value=!0,c.post("/whatsapp/exchange-code",{token:e.authResponse.code},{preserveState:!0,onSuccess:()=>{c.visit("/settings/whatsapp",{preserveState:!1})}}))},{config_id:n.configId,response_type:"code",override_default_response_type:!0,extras:{sessionInfoVersion:2,setup:{}}})}return(e,s)=>(l(),p(S,null,[r.value?(l(),p("div",y,[t("div",w,[s[0]||(s[0]=v('<div class="flex justify-center mb-4"><svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24"><path fill="black" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z" transform="matrix(0 0 0 0 12 12)"><animateTransform id="svgSpinnersPulseRingsMultiple0" attributeName="transform" begin="0;svgSpinnersPulseRingsMultiple2.end" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" type="translate" values="12 12;0 0"></animateTransform><animateTransform additive="sum" attributeName="transform" begin="0;svgSpinnersPulseRingsMultiple2.end" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" type="scale" values="0;1"></animateTransform><animate attributeName="opacity" begin="0;svgSpinnersPulseRingsMultiple2.end" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" values="1;0"></animate></path><path fill="black" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z" transform="matrix(0 0 0 0 12 12)"><animateTransform id="svgSpinnersPulseRingsMultiple1" attributeName="transform" begin="svgSpinnersPulseRingsMultiple0.begin+0.2s" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" type="translate" values="12 12;0 0"></animateTransform><animateTransform additive="sum" attributeName="transform" begin="svgSpinnersPulseRingsMultiple0.begin+0.2s" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" type="scale" values="0;1"></animateTransform><animate attributeName="opacity" begin="svgSpinnersPulseRingsMultiple0.begin+0.2s" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" values="1;0"></animate></path><path fill="black" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z" transform="matrix(0 0 0 0 12 12)"><animateTransform id="svgSpinnersPulseRingsMultiple2" attributeName="transform" begin="svgSpinnersPulseRingsMultiple0.begin+0.4s" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" type="translate" values="12 12;0 0"></animateTransform><animateTransform additive="sum" attributeName="transform" begin="svgSpinnersPulseRingsMultiple0.begin+0.4s" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" type="scale" values="0;1"></animateTransform><animate attributeName="opacity" begin="svgSpinnersPulseRingsMultiple0.begin+0.4s" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" values="1;0"></animate></path></svg></div>',1)),t("p",null,u(e.$t("Please wait for your whatsapp account to be connected!")),1)])])):h("",!0),t("button",{onClick:g,class:"bg-[#1877F2] hover:bg-[#166FE5] text-white font-medium py-2.5 px-4 rounded-lg text-sm flex items-center space-x-2 shadow-sm hover:shadow-md transition-all"},[s[1]||(s[1]=t("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})],-1)),t("span",null,u(e.$t("Login with Facebook")),1)])],64))}};export{M as _};
